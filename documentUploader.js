(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports.documentUploader=t():e.documentUploader=t()})(this,function(){var t=Math.floor,o=Math.pow,e=String.fromCharCode;return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(o,'a',o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=2)}([function(t){var o={utf8:{stringToBytes:function(e){return o.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(o.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],o=0;o<e.length;o++)t.push(255&e.charCodeAt(o));return t},bytesToString:function(t){for(var o=[],n=0;n<t.length;n++)o.push(e(t[n]));return o.join('')}}};t.exports=o},function(e,t){'use strict';function o(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function n(e,t){for(var o=new Uint8Array(e.length+t.length),n=0;n<e.length;n++)o[n]=e[n];for(var r=0;r<t.length;r++)o[r+e.length]=t[r];return o}function r(e,t){var o=new Uint8Array(t),n=new DataView(o.buffer);return n.setUint32(0,e),o}Object.defineProperty(t,'__esModule',{value:!0}),t.addMetadata=function(e,t){var o=t.uploadId,i=t.callType,s=t.wordSize,l=s===void 0?4:s,a=r(o,l),u=r(i,l);return e.map(function(e){var t=r(e.length,l),o=new Uint8Array([]);return o=n(o,u),o=n(o,a),o=n(o,t),o=n(o,e),o})},t.log=function(e){var t;if(e){for(var o=arguments.length,n=Array(1<o?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];(t=console).log.apply(t,[new Date+':'].concat(n))}},t.createError=function(e,t){var o=new Error(t.message||t);return o.name=t.code||e,o},t.pushToBuffer=n;t.generateChunks=function(e,t){var n=t.chunkSize,r=n===void 0?16384:n;return Array.from(e).reduce(function(e,t,n){var i=[].concat(o(e));return 0==n%r?(i.push([t]),i):(i[i.length-1].push(t),i)},[]).map(function(e){return new Uint8Array(e)}).concat(new Uint8Array([]))}},function(e,t,o){'use strict';function n(e){var t=Object.assign({},e,{connection:void 0});return t.buffer=new Uint8Array(e.buffer),t}function r(e){if(!e)throw Error('Options is required');['connection','filename','buffer','documentType','documentId','documentFormat','expirationDate'].forEach(function(t){if(!(t in e))throw Error('Required option <'+t+'> is not found in the given options')})}Object.defineProperty(t,'__esModule',{value:!0}),t.default=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};r(e);var o=t.debug,i=o!==void 0&&o,u=e.connection,f=n(e),p=f.buffer,g=(0,s.default)(Array.from(p)),h=p.length,d=function(e){(0,l.log)(i,'<Sent>:',e),u.send(e)},c=(0,a.requestDocumentUpload)(d,f);return new Promise(function(e,o){if(1===u.readyState)(0,l.log)(i,'Uploading started, File options:',f),c();else throw Error('Connection is not ready!');u.on('message',function(n){(0,l.log)(i,'<Received>:',n);var r=JSON.parse(n);if(r.error)return o((0,l.createError)('ApiError',r.error)),void(0,l.log)(i,r.error);var s=r.document_upload,u=s.checksum,p=s.size,c=s.upload_id,y=s.call_type;if(!u)(0,a.startBinaryUpload)(d,{file:f,config:Object.assign({},t,{uploadId:c,callType:y})});else if(u===g&&p===h)e(s),(0,l.log)(i,'Upload successful, upload info:',s);else if(u!==g){var m=(0,l.createError)('ChecksumMismatch','Checksum does not match');o(m),(0,l.log)(i,m)}else if(p!==h){var _=(0,l.createError)('SizeMismatch','File size does not match');o(_),(0,l.log)(i,_)}})})};var i=o(3),s=function(e){return e&&e.__esModule?e:{default:e}}(i),l=o(1),a=o(10)},function(e,t,o){(function(r){(function(){var s=o(9),u=o(0).utf8,t=o(0).bin,n=function(o){o.constructor==String?o=u.stringToBytes(o):'undefined'!=typeof r&&'function'==typeof r.isBuffer&&r.isBuffer(o)?o=Array.prototype.slice.call(o,0):!Array.isArray(o)&&(o=o.toString());var f=s.bytesToWords(o),p=8*o.length,l=[],g=1732584193,h=-271733879,y=-1732584194,m=271733878,_=-1009589776;f[p>>5]|=128<<24-p%32,f[(p+64>>>9<<4)+15]=p;for(var A=0;A<f.length;A+=16){for(var i=g,a=h,b=y,c=m,d=_,e=0;80>e;e++){if(16>e)l[e]=f[A+e];else{var B=l[e-3]^l[e-8]^l[e-14]^l[e-16];l[e]=B<<1|B>>>31}var n=(g<<5|g>>>27)+_+(l[e]>>>0)+(20>e?(h&y|~h&m)+1518500249:40>e?(h^y^m)+1859775393:60>e?(h&y|h&m|y&m)-1894007588:(h^y^m)-899497514);_=m,m=y,y=h<<30|h>>>2,h=g,g=n}g+=i,h+=a,y+=b,m+=c,_+=d}return[g,h,y,m,_]},i=function(e,o){var r=s.wordsToBytes(n(e));return o&&o.asBytes?r:o&&o.asString?t.bytesToString(r):s.bytesToHex(r)};i._blocksize=16,i._digestsize=20,e.exports=i})()}).call(t,o(4).Buffer)},function(n,r,i){'use strict';(function(n){function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,t){if(s()<t)throw new RangeError('Invalid typed array length');return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=u.prototype):(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,o){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(e,t,o);if('number'==typeof e){if('string'==typeof t)throw new Error('If encoding is specified then the first argument must be a string');return g(this,e)}return a(this,e,t,o)}function a(e,t,o,n){if('number'==typeof t)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&t instanceof ArrayBuffer?c(e,t,o,n):'string'==typeof t?h(e,t,o):y(e,t)}function f(e){if('number'!=typeof e)throw new TypeError('"size" argument must be a number');else if(0>e)throw new RangeError('"size" argument must not be negative')}function p(e,t,o,n){return f(t),0>=t?l(e,t):void 0===o?l(e,t):'string'==typeof n?l(e,t).fill(o,n):l(e,t).fill(o)}function g(e,t){if(f(t),e=l(e,0>t?0:0|m(t)),!u.TYPED_ARRAY_SUPPORT)for(var o=0;o<t;++o)e[o]=0;return e}function h(e,t,o){if(('string'!=typeof o||''===o)&&(o='utf8'),!u.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|_(t,o);e=l(e,n);var r=e.write(t,o);return r!==n&&(e=e.slice(0,r)),e}function d(e,t){var o=0>t.length?0:0|m(t.length);e=l(e,o);for(var n=0;n<o;n+=1)e[n]=255&t[n];return e}function c(e,t,o,n){if(t.byteLength,0>o||t.byteLength<o)throw new RangeError('\'offset\' is out of bounds');if(t.byteLength<o+(n||0))throw new RangeError('\'length\' is out of bounds');return t=void 0===o&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,o):new Uint8Array(t,o,n),u.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=u.prototype):e=d(e,t),e}function y(e,t){if(u.isBuffer(t)){var o=0|m(t.length);return(e=l(e,o),0===e.length)?e:(t.copy(e,0,0,o),e)}if(t){if('undefined'!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||'length'in t)return'number'!=typeof t.length||Z(t.length)?l(e,0):d(e,t);if('Buffer'===t.type&&te(t.data))return d(e,t.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function m(e){if(e>=s())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+s().toString(16)+' bytes');return 0|e}function _(e,t){if(u.isBuffer(e))return e.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;'string'!=typeof e&&(e=''+e);var o=e.length;if(0===o)return 0;for(var n=!1;;)switch(t){case'ascii':case'latin1':case'binary':return o;case'utf8':case'utf-8':case void 0:return V(e).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*o;case'hex':return o>>>1;case'base64':return Q(e).length;default:if(n)return V(e).length;t=(''+t).toLowerCase(),n=!0;}}function b(e,t,o){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return'';if((void 0===o||o>this.length)&&(o=this.length),0>=o)return'';if(o>>>=0,t>>>=0,o<=t)return'';for(e||(e='utf8');;)switch(e){case'hex':return L(this,t,o);case'utf8':case'utf-8':return w(this,t,o);case'ascii':return O(this,t,o);case'latin1':case'binary':return D(this,t,o);case'base64':return Y(this,t,o);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return C(this,t,o);default:if(n)throw new TypeError('Unknown encoding: '+e);e=(e+'').toLowerCase(),n=!0;}}function A(e,t,o){var n=e[t];e[t]=e[o],e[o]=n}function B(e,t,o,n,r){if(0===e.length)return-1;if('string'==typeof o?(n=o,o=0):2147483647<o?o=2147483647:-2147483648>o&&(o=-2147483648),o=+o,isNaN(o)&&(o=r?0:e.length-1),0>o&&(o=e.length+o),o>=e.length){if(r)return-1;o=e.length-1}else if(0>o)if(r)o=0;else return-1;if('string'==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:P(e,t,o,n,r);if('number'==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,o):Uint8Array.prototype.lastIndexOf.call(e,t,o):P(e,[t],o,n,r);throw new TypeError('val must be string, number or Buffer')}function P(e,t,o,n,r){function s(e,t){return 1==l?e[t]:e.readUInt16BE(t*l)}var l=1,a=e.length,u=t.length;if(void 0!==n&&(n=(n+'').toLowerCase(),'ucs2'===n||'ucs-2'===n||'utf16le'===n||'utf-16le'===n)){if(2>e.length||2>t.length)return-1;l=2,a/=2,u/=2,o/=2}var f;if(r){var i=-1;for(f=o;f<a;f++)if(s(e,f)!==s(t,-1==i?0:f-i))-1!=i&&(f-=f-i),i=-1;else if(-1==i&&(i=f),f-i+1===u)return i*l}else for(o+u>a&&(o=a-u),f=o;0<=f;f--){for(var p=!0,g=0;g<u;g++)if(s(e,f+g)!==s(t,g)){p=!1;break}if(p)return f}return-1}function T(e,t,o,n){o=+o||0;var r=e.length-o;n?(n=+n,n>r&&(n=r)):n=r;var s=t.length;if(0!=s%2)throw new TypeError('Invalid hex string');n>s/2&&(n=s/2);for(var l,a=0;a<n;++a){if(l=parseInt(t.substr(2*a,2),16),isNaN(l))return a;e[o+a]=l}return a}function E(e,t,o,n){return G(V(t,e.length-o),e,o,n)}function R(e,t,o,n){return G(X(t),e,o,n)}function U(e,t,o,n){return R(e,t,o,n)}function S(e,t,o,n){return G(Q(t),e,o,n)}function I(e,t,o,n){return G(J(t,e.length-o),e,o,n)}function Y(e,t,o){return 0===t&&o===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,o))}function w(e,t,o){o=K(e.length,o);for(var n=[],r=t;r<o;){var i=e[r],s=null,l=239<i?4:223<i?3:191<i?2:1;if(r+l<=o){var a,u,f,p;1==l?128>i&&(s=i):2==l?(a=e[r+1],128==(192&a)&&(p=(31&i)<<6|63&a,127<p&&(s=p))):3==l?(a=e[r+1],u=e[r+2],128==(192&a)&&128==(192&u)&&(p=(15&i)<<12|(63&a)<<6|63&u,2047<p&&(55296>p||57343<p)&&(s=p))):4==l?(a=e[r+1],u=e[r+2],f=e[r+3],128==(192&a)&&128==(192&u)&&128==(192&f)&&(p=(15&i)<<18|(63&a)<<12|(63&u)<<6|63&f,65535<p&&1114112>p&&(s=p))):void 0}null===s?(s=65533,l=1):65535<s&&(s-=65536,n.push(55296|1023&s>>>10),s=56320|1023&s),n.push(s),r+=l}return x(n)}function x(t){var o=t.length;if(o<=oe)return e.apply(String,t);for(var n='',r=0;r<o;)n+=e.apply(String,t.slice(r,r+=oe));return n}function O(t,o,n){var r='';n=K(t.length,n);for(var s=o;s<n;++s)r+=e(127&t[s]);return r}function D(t,o,n){var r='';n=K(t.length,n);for(var s=o;s<n;++s)r+=e(t[s]);return r}function L(e,t,o){var n=e.length;(!t||0>t)&&(t=0),(!o||0>o||o>n)&&(o=n);for(var r='',s=t;s<o;++s)r+=H(e[s]);return r}function C(t,o,n){for(var r=t.slice(o,n),s='',l=0;l<r.length;l+=2)s+=e(r[l]+256*r[l+1]);return s}function v(e,t,o){if(0!=e%1||0>e)throw new RangeError('offset is not uint');if(e+t>o)throw new RangeError('Trying to access beyond buffer length')}function j(e,t,o,n,r,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<i)throw new RangeError('"value" argument is out of bounds');if(o+n>e.length)throw new RangeError('Index out of range')}function z(e,t,o,n){0>t&&(t=65535+t+1);for(var r=0,i=K(e.length-o,2);r<i;++r)e[o+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function k(e,t,o,n){0>t&&(t=4294967295+t+1);for(var r=0,i=K(e.length-o,4);r<i;++r)e[o+r]=255&t>>>8*(n?r:3-r)}function M(e,t,o,n){if(o+n>e.length)throw new RangeError('Index out of range');if(0>o)throw new RangeError('Index out of range')}function F(e,t,o,n,r){return r||M(e,t,o,4,3.4028234663852886e38,-3.4028234663852886e38),ee.write(e,t,o,n,23,4),o+4}function q(e,t,o,n,r){return r||M(e,t,o,8,1.7976931348623157e308,-1.7976931348623157e308),ee.write(e,t,o,n,52,8),o+8}function N(e){if(e=W(e).replace(ne,''),2>e.length)return'';for(;0!=e.length%4;)e+='=';return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,'')}function H(e){return 16>e?'0'+e.toString(16):e.toString(16)}function V(e,t){t=t||Infinity;for(var o,n=e.length,r=null,s=[],l=0;l<n;++l){if(o=e.charCodeAt(l),55295<o&&57344>o){if(!r){if(56319<o){-1<(t-=3)&&s.push(239,191,189);continue}else if(l+1===n){-1<(t-=3)&&s.push(239,191,189);continue}r=o;continue}if(56320>o){-1<(t-=3)&&s.push(239,191,189),r=o;continue}o=(r-55296<<10|o-56320)+65536}else r&&-1<(t-=3)&&s.push(239,191,189);if(r=null,128>o){if(0>(t-=1))break;s.push(o)}else if(2048>o){if(0>(t-=2))break;s.push(192|o>>6,128|63&o)}else if(65536>o){if(0>(t-=3))break;s.push(224|o>>12,128|63&o>>6,128|63&o)}else if(1114112>o){if(0>(t-=4))break;s.push(240|o>>18,128|63&o>>12,128|63&o>>6,128|63&o)}else throw new Error('Invalid code point')}return s}function X(e){for(var t=[],o=0;o<e.length;++o)t.push(255&e.charCodeAt(o));return t}function J(e,t){for(var o,n,r,s=[],l=0;l<e.length&&!(0>(t-=2));++l)o=e.charCodeAt(l),n=o>>8,r=o%256,s.push(r),s.push(n);return s}function Q(e){return $.toByteArray(N(e))}function G(e,t,o,n){for(var r=0;r<n&&!(r+o>=t.length||r>=e.length);++r)t[r+o]=e[r];return r}function Z(e){return e!==e}var K=Math.min,$=i(6),ee=i(7),te=i(8);/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */r.Buffer=u,r.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},r.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=n.TYPED_ARRAY_SUPPORT===void 0?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&'function'==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}():n.TYPED_ARRAY_SUPPORT,r.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,o){return a(null,e,t,o)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,o){return p(null,e,t,o)},u.allocUnsafe=function(e){return g(null,e)},u.allocUnsafeSlow=function(e){return g(null,e)},u.isBuffer=function(e){return!!(null!=e&&e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('Arguments must be Buffers');if(e===t)return 0;for(var o=e.length,n=t.length,r=0,i=K(o,n);r<i;++r)if(e[r]!==t[r]){o=e[r],n=t[r];break}return o<n?-1:n<o?1:0},u.isEncoding=function(e){switch((e+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},u.concat=function(e,t){if(!te(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var o;if(t===void 0)for(t=0,o=0;o<e.length;++o)t+=e[o].length;var n=u.allocUnsafe(t),r=0;for(o=0;o<e.length;++o){var i=e[o];if(!u.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,r),r+=i.length}return n},u.byteLength=_,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var t=0;t<e;t+=2)A(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var t=0;t<e;t+=4)A(this,t,t+3),A(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var t=0;t<e;t+=8)A(this,t,t+7),A(this,t+1,t+6),A(this,t+2,t+5),A(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0==e?'':0===arguments.length?w(this,0,e):b.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError('Argument must be a Buffer');return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e='',t=r.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString('hex',0,t).match(/.{2}/g).join(' '),this.length>t&&(e+=' ... ')),'<Buffer '+e+'>'},u.prototype.compare=function(e,t,o,n,r){if(!u.isBuffer(e))throw new TypeError('Argument must be a Buffer');if(void 0===t&&(t=0),void 0===o&&(o=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),0>t||o>e.length||0>n||r>this.length)throw new RangeError('out of range index');if(n>=r&&t>=o)return 0;if(n>=r)return-1;if(t>=o)return 1;if(t>>>=0,o>>>=0,n>>>=0,r>>>=0,this===e)return 0;for(var s=r-n,l=o-t,a=K(s,l),f=this.slice(n,r),p=e.slice(t,o),g=0;g<a;++g)if(f[g]!==p[g]){s=f[g],l=p[g];break}return s<l?-1:l<s?1:0},u.prototype.includes=function(e,t,o){return-1!==this.indexOf(e,t,o)},u.prototype.indexOf=function(e,t,o){return B(this,e,t,o,!0)},u.prototype.lastIndexOf=function(e,t,o){return B(this,e,t,o,!1)},u.prototype.write=function(e,t,o,n){if(void 0===t)n='utf8',o=this.length,t=0;else if(void 0===o&&'string'==typeof t)n=t,o=this.length,t=0;else if(isFinite(t))t|=0,isFinite(o)?(o|=0,void 0===n&&(n='utf8')):(n=o,o=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var r=this.length-t;if((void 0===o||o>r)&&(o=r),0<e.length&&(0>o||0>t)||t>this.length)throw new RangeError('Attempt to write outside buffer bounds');n||(n='utf8');for(var i=!1;;)switch(n){case'hex':return T(this,e,t,o);case'utf8':case'utf-8':return E(this,e,t,o);case'ascii':return R(this,e,t,o);case'latin1':case'binary':return U(this,e,t,o);case'base64':return S(this,e,t,o);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return I(this,e,t,o);default:if(i)throw new TypeError('Unknown encoding: '+n);n=(''+n).toLowerCase(),i=!0;}},u.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var oe=4096;u.prototype.slice=function(e,t){var o=this.length;e=~~e,t=t===void 0?o:~~t,0>e?(e+=o,0>e&&(e=0)):e>o&&(e=o),0>t?(t+=o,0>t&&(t=0)):t>o&&(t=o),t<e&&(t=e);var n;if(u.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=u.prototype;else{var r=t-e;n=new u(r,void 0);for(var s=0;s<r;++s)n[s]=this[s+e]}return n},u.prototype.readUIntLE=function(e,t,o){e|=0,t|=0,o||v(e,t,this.length);for(var n=this[e],r=1,s=0;++s<t&&(r*=256);)n+=this[e+s]*r;return n},u.prototype.readUIntBE=function(e,t,o){e|=0,t|=0,o||v(e,t,this.length);for(var n=this[e+--t],r=1;0<t&&(r*=256);)n+=this[e+--t]*r;return n},u.prototype.readUInt8=function(e,t){return t||v(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||v(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||v(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||v(e,t,this.length);for(var r=this[e],s=1,l=0;++l<t&&(s*=256);)r+=this[e+l]*s;return s*=128,r>=s&&(r-=o(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||v(e,t,this.length);for(var r=t,i=1,s=this[e+--r];0<r&&(i*=256);)s+=this[e+--r]*i;return i*=128,s>=i&&(s-=o(2,8*t)),s},u.prototype.readInt8=function(e,t){return t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||v(e,2,this.length);var o=this[e]|this[e+1]<<8;return 32768&o?4294901760|o:o},u.prototype.readInt16BE=function(e,t){t||v(e,2,this.length);var o=this[e+1]|this[e]<<8;return 32768&o?4294901760|o:o},u.prototype.readInt32LE=function(e,t){return t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||v(e,4,this.length),ee.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||v(e,4,this.length),ee.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||v(e,8,this.length),ee.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||v(e,8,this.length),ee.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var s=o(2,8*n)-1;j(this,e,t,n,s,0)}var l=1,a=0;for(this[t]=255&e;++a<n&&(l*=256);)this[t+a]=255&e/l;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var s=o(2,8*n)-1;j(this,e,t,n,s,0)}var l=n-1,i=1;for(this[t+l]=255&e;0<=--l&&(i*=256);)this[t+l]=255&e/i;return t+n},u.prototype.writeUInt8=function(e,o,n){return e=+e,o|=0,n||j(this,e,o,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=t(e)),this[o]=255&e,o+1},u.prototype.writeUInt16LE=function(e,t,o){return e=+e,t|=0,o||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,o){return e=+e,t|=0,o||j(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,o){return e=+e,t|=0,o||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):k(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,o){return e=+e,t|=0,o||j(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var s=o(2,8*n-1);j(this,e,t,n,s-1,-s)}var l=0,i=1,a=0;for(this[t]=255&e;++l<n&&(i*=256);)0>e&&0==a&&0!==this[t+l-1]&&(a=1),this[t+l]=255&(e/i>>0)-a;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var s=o(2,8*n-1);j(this,e,t,n,s-1,-s)}var l=n-1,i=1,a=0;for(this[t+l]=255&e;0<=--l&&(i*=256);)0>e&&0==a&&0!==this[t+l+1]&&(a=1),this[t+l]=255&(e/i>>0)-a;return t+n},u.prototype.writeInt8=function(e,o,n){return e=+e,o|=0,n||j(this,e,o,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=t(e)),0>e&&(e=255+e+1),this[o]=255&e,o+1},u.prototype.writeInt16LE=function(e,t,o){return e=+e,t|=0,o||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,o){return e=+e,t|=0,o||j(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,o){return e=+e,t|=0,o||j(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):k(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,o){return e=+e,t|=0,o||j(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):k(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,o){return F(this,e,t,!0,o)},u.prototype.writeFloatBE=function(e,t,o){return F(this,e,t,!1,o)},u.prototype.writeDoubleLE=function(e,t,o){return q(this,e,t,!0,o)},u.prototype.writeDoubleBE=function(e,t,o){return q(this,e,t,!1,o)},u.prototype.copy=function(e,t,o,n){if(o||(o=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<o&&(n=o),n===o)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError('targetStart out of bounds');if(0>o||o>=this.length)throw new RangeError('sourceStart out of bounds');if(0>n)throw new RangeError('sourceEnd out of bounds');n>this.length&&(n=this.length),e.length-t<n-o&&(n=e.length-t+o);var r,i=n-o;if(this===e&&o<t&&t<n)for(r=i-1;0<=r;--r)e[r+t]=this[r+o];else if(1e3>i||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)e[r+t]=this[r+o];else Uint8Array.prototype.set.call(e,this.subarray(o,o+i),t);return i},u.prototype.fill=function(e,t,o,n){if('string'==typeof e){if('string'==typeof t?(n=t,t=0,o=this.length):'string'==typeof o&&(n=o,o=this.length),1===e.length){var r=e.charCodeAt(0);256>r&&(e=r)}if(void 0!==n&&'string'!=typeof n)throw new TypeError('encoding must be a string');if('string'==typeof n&&!u.isEncoding(n))throw new TypeError('Unknown encoding: '+n)}else'number'==typeof e&&(e&=255);if(0>t||this.length<t||this.length<o)throw new RangeError('Out of range index');if(o<=t)return this;t>>>=0,o=o===void 0?this.length:o>>>0,e||(e=0);var s;if('number'==typeof e)for(s=t;s<o;++s)this[s]=e;else{var i=u.isBuffer(e)?e:V(new u(e,n).toString()),l=i.length;for(s=0;s<o-t;++s)this[s+t]=i[s%l]}return this};var ne=/[^+\/0-9A-Za-z-_]/g}).call(r,i(5))},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(o){'object'==typeof window&&(t=window)}e.exports=t},function(e,t){'use strict';function o(e){var t=e.length;if(0<t%4)throw new Error('Invalid string. Length must be a multiple of 4');return'='===e[t-2]?2:'='===e[t-1]?1:0}function n(e){return s[63&e>>18]+s[63&e>>12]+s[63&e>>6]+s[63&e]}function r(e,t,o){for(var r,s=[],l=t;l<o;l+=3)r=(e[l]<<16)+(e[l+1]<<8)+e[l+2],s.push(n(r));return s.join('')}t.byteLength=function(e){return 3*e.length/4-o(e)},t.toByteArray=function(e){var t,n,r,i,s,l=e.length;i=o(e),s=new u(3*l/4-i),n=0<i?l-4:l;var f=0;for(t=0;t<n;t+=4)r=a[e.charCodeAt(t)]<<18|a[e.charCodeAt(t+1)]<<12|a[e.charCodeAt(t+2)]<<6|a[e.charCodeAt(t+3)],s[f++]=255&r>>16,s[f++]=255&r>>8,s[f++]=255&r;return 2===i?(r=a[e.charCodeAt(t)]<<2|a[e.charCodeAt(t+1)]>>4,s[f++]=255&r):1===i&&(r=a[e.charCodeAt(t)]<<10|a[e.charCodeAt(t+1)]<<4|a[e.charCodeAt(t+2)]>>2,s[f++]=255&r>>8,s[f++]=255&r),s},t.fromByteArray=function(e){for(var t,o=e.length,n=o%3,l='',a=[],u=16383,f=0,i=o-n;f<i;f+=u)a.push(r(e,f,f+u>i?i:f+u));return 1==n?(t=e[o-1],l+=s[t>>2],l+=s[63&t<<4],l+='=='):2==n&&(t=(e[o-2]<<8)+e[o-1],l+=s[t>>10],l+=s[63&t>>4],l+=s[63&t<<2],l+='='),a.push(l),a.join('')};for(var s=[],a=[],u='undefined'==typeof Uint8Array?Array:Uint8Array,l='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',f=0,i=l.length;f<i;++f)s[f]=l[f],a[l.charCodeAt(f)]=f;a[45]=62,a[95]=63},function(e,n){n.read=function(t,n,r,l,a){var u,e,f=8*a-l-1,p=(1<<f)-1,g=p>>1,h=-7,c=r?a-1:0,i=r?-1:1,d=t[n+c];for(c+=i,u=d&(1<<-h)-1,d>>=-h,h+=f;0<h;u=256*u+t[n+c],c+=i,h-=8);for(e=u&(1<<-h)-1,u>>=-h,h+=l;0<h;e=256*e+t[n+c],c+=i,h-=8);if(0===u)u=1-g;else{if(u===p)return e?NaN:(d?-1:1)*Infinity;e+=o(2,l),u-=g}return(d?-1:1)*e*o(2,u-l)},n.write=function(n,r,l,a,u,f){var p,g,h,c=8*f-u-1,y=(1<<c)-1,m=y>>1,_=23===u?5.960464477539063e-8-6.617444900424222e-24:0,b=a?0:f-1,i=a?1:-1,d=0>r||0===r&&0>1/r?1:0;for(r=Math.abs(r),isNaN(r)||r===Infinity?(g=isNaN(r)?1:0,p=y):(p=t(Math.log(r)/Math.LN2),1>r*(h=o(2,-p))&&(p--,h*=2),r+=1<=p+m?_/h:_*o(2,1-m),2<=r*h&&(p++,h/=2),p+m>=y?(g=0,p=y):1<=p+m?(g=(r*h-1)*o(2,u),p+=m):(g=r*o(2,m-1)*o(2,u),p=0));8<=u;n[l+b]=255&g,b+=i,g/=256,u-=8);for(p=p<<u|g,c+=u;0<c;n[l+b]=255&p,b+=i,p/=256,c-=8);n[l+b-i]|=128*d}},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return'[object Array]'==t.call(e)}},function(e){(function(){var n='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var o=[];0<e;e--)o.push(t(256*Math.random()));return o},bytesToWords:function(e){for(var t=[],o=0,n=0;o<e.length;o++,n+=8)t[n>>>5]|=e[o]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],o=0;o<32*e.length;o+=8)t.push(255&e[o>>>5]>>>24-o%32);return t},bytesToHex:function(e){for(var t=[],o=0;o<e.length;o++)t.push((e[o]>>>4).toString(16)),t.push((15&e[o]).toString(16));return t.join('')},hexToBytes:function(e){for(var t=[],o=0;o<e.length;o+=2)t.push(parseInt(e.substr(o,2),16));return t},bytesToBase64:function(e){for(var t,o=[],r=0;r<e.length;r+=3){t=e[r]<<16|e[r+1]<<8|e[r+2];for(var i=0;4>i;i++)8*r+6*i<=8*e.length?o.push(n.charAt(63&t>>>6*(3-i))):o.push('=')}return o.join('')},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/ig,'');for(var t=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&t.push((n.indexOf(e.charAt(r-1))&o(2,-2*i+8)-1)<<2*i|n.indexOf(e.charAt(r))>>>6-2*i);return t}};e.exports=r})()},function(e,t,o){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.requestDocumentUpload=t.startBinaryUpload=void 0;var n=o(1),r=0,i=t.startBinaryUpload=function(e,t){var o=t.file.buffer,r=t.config;return(0,n.addMetadata)((0,n.generateChunks)(o,r),r).forEach(function(t){return e(t)})},s=t.requestDocumentUpload=function(e,t){var o=t.documentType,n=t.documentFormat,i=t.documentId,s=t.expirationDate;return function(){return e(JSON.stringify({document_upload:1,req_id:++r,document_type:o,document_format:n,expiration_date:s,document_id:i}))}}}])['default']});